(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-draw-draw3d"],{"2e7d":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{wxsProps:{"change:data":"data"},staticClass:"content",attrs:{data:e.data,"change:data":e.three.change_data}},[a("v-uni-view",{attrs:{id:"threeView"}}),a("v-uni-view",{staticClass:"three",attrs:{id:"three"},on:{click:function(t){t=e.$handleWxsEvent(t),e.three.onClick(t,e.$getComponentDescriptor())}}})],1)},n=[]},"2fc7":function(e,t,a){"use strict";a.r(t);var o=a("2e7d"),n=a("866e");for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);var i=a("3192");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("a88b");var s=a("f0c5");n["default"].__module="three";var l=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"555637f5",null,!1,o["a"],n["default"]);t["default"]=l.exports},"313a":function(e,t,a){var o=a("323f");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var n=a("4f06").default;n("7adffe3a",o,!0,{sourceMap:!1,shadowMode:!1})},3192:function(e,t,a){"use strict";a.r(t);var o=a("358e"),n=a.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);t["default"]=n.a},"323f":function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,".content[data-v-555637f5]{margin:0;overflow:hidden}.three[data-v-555637f5]{width:100%;height:50px}",""]),e.exports=t},"358e":function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;a("e143");var o={data:function(){return{data:null}},mounted:function(){this.data=uni.getStorageSync("result_file"),console.log(this.data)},methods:{}};t.default=o},"866e":function(e,t,a){"use strict";a.r(t);var o=a("8bae"),n=a.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);t["default"]=n.a},"8bae":function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14d9"),a("38cf");var o,n,r,i=a("43d9"),s=a("fd6c"),l=a("1bc9")(s),c=[],u=[],h={data:function(){return{housedata:null}},mounted:function(){this.initThree(),this.createControls()},methods:{change_data:function(e){console.log("----------"),this.housedata=e,console.log(e),this.createLayout(),this.createWallMaterail(),this.createFloor()},createControls:function(){new i.OrbitControls(r,o.domElement)},get_wallspoint:function(e){for(var t=0;t<this.housedata.WallPoints.length;t++)if(this.housedata.WallPoints[t].id==e)return this.housedata.WallPoints[t]},draw_All_Door:function(){this.ctx.restore();for(var e=0;e<this.housedata.Doors.length;e++){1==this.housedata.Doors[e].category?"双开门":2==this.housedata.Doors[e].category?"子母门":3==this.housedata.Doors[e].category&&"移门";this.get_Doorspoint(this.housedata.Doors[e].start_point),this.get_Doorspoint(this.housedata.Doors[e].end_point)}this.ctx.save()},get_Doorspoint:function(e){for(var t=0;t<this.housedata.DoorPoints.length;t++)if(this.housedata.DoorPoints[t].id==e)return this.housedata.DoorPoints[t]},createWallMaterail:function(){c.push(new s.MeshPhongMaterial({color:11518154})),c.push(new s.MeshPhongMaterial({color:11518154})),c.push(new s.MeshPhongMaterial({color:14083308})),c.push(new s.MeshPhongMaterial({color:14083308})),c.push(new s.MeshPhongMaterial({color:11518154})),c.push(new s.MeshPhongMaterial({color:11518154})),u.push(new s.MeshPhongMaterial({color:11518154})),u.push(new s.MeshPhongMaterial({color:10269393})),u.push(new s.MeshPhongMaterial({color:14083308})),u.push(new s.MeshPhongMaterial({color:14083308})),u.push(new s.MeshPhongMaterial({color:11518154})),u.push(new s.MeshPhongMaterial({color:11518154}))},createLayout:function(){for(var e=0;e<this.housedata.Walls.length;e++){var t=this.get_wallspoint(this.housedata.Walls[e].start_point),a=this.get_wallspoint(this.housedata.Walls[e].end_point);console.log(t),console.log(a),console.log("结束");var o=new s.Vector3(100*t.x,200,100*t.y),n=new s.Vector3(100*a.x,0,100*a.y);this.createMyWall(o,n,c)}},createMyWall:function(e,t,a){var o=new s.Vector3;o.subVectors(t,e);o.length(),o.normalize();var r=new s.BoxGeometry(Math.abs(e.x-t.x),Math.abs(e.y-t.y),Math.abs(e.z-t.z)),i=new s.Vector3;i.addVectors(e,o.multiplyScalar(.5));var l=new s.Mesh(r,a);l.position.copy(i),n.add(l)},returnWallObject:function(e,t,a,o,n,r,i,l){var c=new s.BoxGeometry(e,t,a),u=new s.Mesh(c,n);return u.position.x=r,u.position.y=i,u.position.z=l,u.rotation.y+=o*Math.PI,u},createResultBsp:function(e,t,a){switch(a){case 1:var o=new s.MeshPhongMaterial({color:10269393,specular:10269393,shininess:30,transparent:!0,opacity:1});break;case 2:o=new s.MeshPhongMaterial({color:11518154,specular:11518154,shininess:30,transparent:!0,opacity:1});break;default:}var r=new l(e),i=new l(t),c=r.subtract(i),u=c.toMesh(o);u.material.flatshading=s.FlatShading,u.geometry.computeFaceNormals(),u.geometry.computeVertexNormals(),u.material.needsUpdate=!0,u.geometry.buffersNeedUpdate=!0,u.geometry.uvsNeedUpdate=!0,n.add(u)},createFloor:function(){var e=new s.TextureLoader;e.load("static/images/floor.jpg",(function(e){e.wrapS=e.wrapT=s.RepeatWrapping,e.repeat.set(10,10);var t=new s.BoxGeometry(2e3,2e3,1),a=new s.MeshBasicMaterial({map:e,side:s.DoubleSide}),o=new s.Mesh(t,a);o.position.y=-.5,o.rotation.x=Math.PI/2,n.add(o)}));var t=new s.MeshBasicMaterial({color:15528435});t.opacity=.4,t.transparent=!0},createCubeWall:function(e,t,a,o,r,i,l,c){var u=new s.BoxGeometry(e,t,a),h=new s.Mesh(u,r);h.position.x=i,h.position.y=l,h.position.z=c,h.rotation.y+=o*Math.PI,n.add(h)},initThree:function(){console.log("打印场景API",s.Scene),n=new s.Scene;var e=new s.AmbientLight(16777215);n.add(e);var t=window.innerWidth,a=window.innerHeight,i=t/a;r=new s.PerspectiveCamera(45,i,1,1e4),r.position.set(0,3500,0),r.lookAt(n.position),o=new s.WebGLRenderer({antialias:!0}),o.setSize(t,a),o.setClearColor(12178431,1);var l=document.getElementById("threeView");l.appendChild(o.domElement),o.render(n,r),console.log(1),this.render()},render:function(){var e=this;requestAnimationFrame((function(){e.render()})),o.render(n,r)}}};t.default=h},a88b:function(e,t,a){"use strict";var o=a("313a"),n=a.n(o);n.a}}]);