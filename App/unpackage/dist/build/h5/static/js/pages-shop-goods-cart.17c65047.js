(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-goods-cart"],{"015b":function(t,e,i){"use strict";var n=i("d424"),o=i.n(n);o.a},"04ff":function(t,e,i){"use strict";i.r(e);var n=i("c710"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},"0533":function(t,e,i){"use strict";i.r(e);var n=i("c41b"),o=i("04ff");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("015b");var s=i("f0c5"),r=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"7e29ff49",null,!1,n["a"],void 0);e["default"]=r.exports},"430b":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.cart[data-v-7e29ff49]{padding:%?10?% 4%}.clearCart[data-v-7e29ff49]{height:%?80?%;font-size:%?26?%;text-align:right;line-height:%?80?%;position:fixed;left:0;width:100vw;padding:0 4%;background-color:#fff;z-index:100}.cart_box[data-v-7e29ff49]{margin-top:%?80?%;padding-bottom:%?100?%}.cart_list[data-v-7e29ff49]{width:92vw;height:calc(22vw + %?34?%);border-radius:%?12?%;box-shadow:0 %?4?% %?16?% rgba(0,0,0,.1);overflow:hidden;border:0;display:flex;align-items:center;position:relative;margin-bottom:%?20?%}.cart_list .checkbox-box[data-v-7e29ff49]{padding-left:%?16?%;flex-shrink:0;height:22vw;margin-right:%?16?%;align-items:center;position:relative;width:%?50?%}.cart_list .checkbox-box .checkbox[data-v-7e29ff49]{width:%?28?%;height:%?28?%;border-radius:100%;border:solid %?1?%;position:absolute;top:50%;left:%?20?%;display:flex;align-items:center;justify-content:center;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.cart_list .checkbox-box .checkbox .on[data-v-7e29ff49]{width:%?20?%;height:%?20?%;border-radius:100%;align-items:center}.cart_list .cover[data-v-7e29ff49]{width:22vw;height:22vw;flex-shrink:0;margin-left:%?10?%;border-radius:%?8?%;overflow:hidden;margin-right:%?10?%;position:relative}.cart_list .cover .mask[data-v-7e29ff49]{width:100%;height:100%;background-color:rgba(0,0,0,.6);position:absolute;top:0;left:0;text-align:center;color:#ddd;font-size:%?24?%;line-height:22vw}.cart_list .cover .masks[data-v-7e29ff49]{width:100%;height:100%;position:absolute;top:0;left:0}.cart_list .cover uni-image[data-v-7e29ff49]{width:100%;height:100%;display:block}.daodi[data-v-7e29ff49]{text-align:center;font-size:%?24?%;color:#ccc;margin-top:%?30?%}.right[data-v-7e29ff49]{height:22vw;width:100%;\r\n  /* overflow: hidden; */display:flex;flex-wrap:wrap;padding-right:%?15?%;position:relative}.right .goods_name[data-v-7e29ff49]{width:100%;font-size:%?24?%;line-height:%?34?%;max-height:%?68?%;color:#333;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.sku[data-v-7e29ff49]{font-size:%?22?%;background-color:#f3f3f3;border-radius:%?10?%;height:%?40?%;line-height:%?40?%;padding:0 %?10?%;color:#a7a7a7;margin-bottom:%?40?%}.numbers[data-v-7e29ff49]{position:absolute;width:100%;overflow:hidden;display:flex;justify-content:space-between;align-items:flex-end;height:%?50?%;bottom:%?-5?%}.numbers .price[data-v-7e29ff49]{font-size:%?30?%;line-height:%?50?%;color:red}.numbers .right_btn[data-v-7e29ff49]{display:flex;justify-content:center;align-items:flex-end;margin-right:%?20?%}.right_btn .sub[data-v-7e29ff49]{width:%?40?%;height:%?40?%;font-size:%?40?%;background-color:#f3f3f3;border-radius:%?4?%;text-align:center;line-height:%?40?%}.right_btn .sub[data-v-7e29ff49]:active{background-color:#f8f8f8}.right_btn .input[data-v-7e29ff49]{width:%?50?%;height:%?50?%;margin:0 %?8?%;background-color:#f3f3f3}.right_btn .input uni-input[data-v-7e29ff49]{width:%?50?%;height:%?50?%;display:flex;font-size:%?22?%;text-align:center;align-items:center;justify-content:center;color:red}.right_btn .add[data-v-7e29ff49]{width:%?40?%;height:%?40?%;font-size:%?40?%;background-color:#f3f3f3;border-radius:%?4?%;text-align:center;line-height:%?40?%}.right_btn .add[data-v-7e29ff49]:active{background-color:#f8f8f8}.del_mask[data-v-7e29ff49]{width:100%;height:100%;position:fixed;top:0;left:0;z-index:-21}.dask_del[data-v-7e29ff49]{width:100%;height:100%;position:absolute;top:0;left:0;background-color:rgba(0,0,0,.5);z-index:-20;display:flex;align-items:center;opacity:0;transition:all .3s}.dask_del .del[data-v-7e29ff49],\r\n.cencal[data-v-7e29ff49]{width:%?100?%;height:%?100?%;display:flex;justify-content:center;line-height:%?100?%;border-radius:100%;text-align:center;font-size:%?24?%;background:linear-gradient(#ff5d39,#ffaf48);color:#fff;font-weight:500;margin:0 auto}.dask_del uni-text[data-v-7e29ff49]:active{opacity:.9}.cencal[data-v-7e29ff49]{background:linear-gradient(#ffe846,#ffcd43)}.bottom_all[data-v-7e29ff49]{height:%?100?%;width:100%;padding:0 2%;align-items:center;justify-content:center;position:fixed;bottom:0;left:0;background-color:#fdfdfd;z-index:11;border-top:%?1?% solid #f8f8f8}.bottom_all .left[data-v-7e29ff49]{float:left;width:40vw;font-size:%?24?%;position:relative}.bottom_all .left .delAll[data-v-7e29ff49]{height:%?40?%;border-radius:%?20?%;font-size:%?22?%;line-height:%?38?%;border:solid %?1?%;text-align:center;width:%?92?%;position:absolute;right:%?50?%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.bottom_all .left .text[data-v-7e29ff49]{position:absolute;left:%?60?%;top:50%;-webkit-transform:translateY(-52%);transform:translateY(-52%)}.bottom_all .checkbox-box[data-v-7e29ff49]{padding-left:%?16?%;flex-shrink:0;height:%?100?%;margin-right:%?16?%;align-items:center;position:relative}.bottom_all .checkbox-box .checkbox[data-v-7e29ff49]{width:%?32?%;height:%?32?%;border-radius:100%;border:solid %?1?%;position:absolute;top:50%;left:%?20?%;display:flex;align-items:center;justify-content:center;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.bottom_all .checkbox-box .checkbox .on[data-v-7e29ff49]{width:%?20?%;height:%?20?%;border-radius:100%;align-items:center}.bottom_all .rights[data-v-7e29ff49]{float:right;width:56vw;line-height:%?100?%;font-size:%?24?%}.bottom_all .rights uni-view[data-v-7e29ff49]{float:right}.bottom_all .rights .sum[data-v-7e29ff49]{font-weight:700;margin-right:%?20?%}.bottom_all .rights .jiesuan[data-v-7e29ff49]{padding:0 %?22?%;border-radius:%?24?%;background-color:pink;height:%?50?%;line-height:%?50?%;color:#fff;font-size:%?24?%;margin-top:%?28?%;margin-left:%?40?%}\r\n/* 购物车为空的样式} */.nocart[data-v-7e29ff49]{text-align:center;margin-top:30vh}.nocart .iconfont[data-v-7e29ff49]{font-size:%?80?%;text-align:center}.nocart uni-view[data-v-7e29ff49]{height:%?40?%;line-height:%?40?%;font-size:%?24?%;color:#999;margin-top:%?20?%}',""]),t.exports=e},c41b:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"cart"},[0!==t.cartList.length?[i("v-uni-view",{staticClass:"clearCart",style:{color:t.colors,top:1==t.showHeader?t.statusBarHeight+"px":"0upx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearInvalid.apply(void 0,arguments)}}},[t._v("清空失效商品")]),i("v-uni-view",{staticClass:"cart_box"},[t._l(t.cartList,(function(e,n){return i("v-uni-view",{key:e.goodsId,staticClass:"cart_list",on:{longpress:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onshowDel(e,n)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.ontouchend.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"checkbox-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setCurrent(n)}}},[i("v-uni-view",{staticClass:"checkbox",style:"border-color:"+t.colors},[i("v-uni-view",{class:1==e.select?"on":"",style:"background-color:"+t.colors})],1)],1),i("v-uni-view",{staticClass:"cover",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.jumpDetails(e,n)}}},[i("v-uni-image",{attrs:{src:e.goods_image[0].imageUrl,mode:"aspectFill"}}),i("v-uni-text",{staticClass:"masks"}),1==e.status?i("v-uni-text",{staticClass:"mask"},[t._v("已失效")]):t._e()],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-view",{staticClass:"goods_name",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.jumpDetails(e,n)}}},[t._v(t._s(e.title))]),i("v-uni-view",{staticClass:"sku"},[[i("v-uni-text",[t._v("暂无规格")])]],2),i("v-uni-view",{staticClass:"numbers"},[i("v-uni-text",{staticClass:"price"},[t._v("￥"+t._s(e.price))]),i("v-uni-view",{staticClass:"right_btn"},[i("v-uni-view",{staticClass:"sub",style:"color:"+(1==e.num?"#ccc":""),on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onsub(e,n)}}},[t._v("-")]),i("v-uni-view",{staticClass:"input"},[i("v-uni-input",{attrs:{maxlength:"2",disabled:!0},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.change_count(e)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"item.count"}})],1),i("v-uni-view",{staticClass:"add",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onadd(e,n)}}},[t._v("+")])],1)],1)],1),t.current==n?i("v-uni-view",{staticClass:"del_mask",style:"z-index:"+(t.current==n?"99":"-21"),on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.oncencal.apply(void 0,arguments)}}}):t._e(),i("v-uni-view",{staticClass:"dask_del",style:"opacity:"+(t.current==n?"1":"0")+";z-index:"+(t.current==n?"100":"-20")+";left:"+(t.current==n?"0":"-100%")},[i("v-uni-text",{staticClass:"del",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.delItem(e,n)}}},[t._v("删除")]),i("v-uni-text",{staticClass:"cencal",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.oncencal.apply(void 0,arguments)}}},[t._v("取消")])],1)],1)})),t.cartList.length>=5?i("v-uni-view",{staticClass:"daodi"},[t._v("—— 到底啦 ——")]):t._e()],2),i("v-uni-view",{staticClass:"bottom_all",style:{marginBottom:t.bottomShow}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-view",{staticClass:"checkbox-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setAllCurrent.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"checkbox",style:"border-color:"+t.colors},[i("v-uni-view",{class:1==t.allCurrent?"on":"",style:"background-color:"+t.colors})],1),i("v-uni-view",{staticClass:"text"},[t._v("全选")])],1),1==t.allCurrent?i("v-uni-view",{staticClass:"delAll",style:"border-color:"+t.colors+";color:"+t.colors,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delectAll.apply(void 0,arguments)}}},[t._v("删除")]):t._e()],1),i("v-uni-view",{staticClass:"rights"},[i("v-uni-view",{staticClass:"jiesuan",style:"background-color:"+t.colors,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.settlement.apply(void 0,arguments)}}},[t._v("结算("+t._s(t.sum)+")")]),i("v-uni-view",{staticClass:"sum"},[t._v("合计："),i("v-uni-text",{staticStyle:{"font-size":"30upx"}},[t._v("￥"+t._s(t.sumPrice||0))])],1)],1)],1)]:t._e(),0==t.cartList.length?i("v-uni-view",{staticClass:"nocart"},[i("v-uni-text",{staticClass:"iconfont icon-gouwuche1",style:"color:"+t.colors}),i("v-uni-view",[t._v("空空如也,"),i("v-uni-text",{style:"color:"+t.colors,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onStroll.apply(void 0,arguments)}}},[t._v("随便逛逛 >")])],1)],1):t._e()],2)},o=[]},c710:function(t,e,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("5530"));i("14d9"),i("a434"),i("acd8");var a=getApp(),s={data:function(){return{colors:"",statusBarHeight:20,cartList:[],current:99999,allCurrent:!1,sum:0,sumPrice:0,lock:!1,bottomShow:"",showHeader:!1}},components:{},props:{},onLoad:function(t){this.bottomShow="100upx"},onShow:function(){this.setData({colors:a.globalData.newColor,current:"99999",allCurrent:!1,sum:0,sumPrice:0})},mounted:function(){var t=this;uni.showLoading({title:"载入数据中..."}),this.request(this.server_url+"shopping/get",{},"GET").then((function(e){uni.hideLoading(),console.log(e);for(var i=0;i<e.data.length;i++)t.cartList.push((0,o.default)((0,o.default)({},e.data[i]),{},{select:!1}))}))},methods:{change_count:function(t){var e={goods_id:t.goodsId,count:t.count};this.request(this.server_url+"shopping/update",e,"POSt").then((function(t){0==t.code&&uni.showToast({title:"修改成功！"})})),this.getSumprice()},setCurrent:function(t){this.cartList[t].select=!0,this.getSumprice()},onshowDel:function(t,e){this.setData({current:e,lock:!0})},delItem:function(t,e){var i=this,n={goods_id:t.goodsId};this.request(this.server_url+"shopping/delete",n,"POST").then((function(t){0==t.code&&(i.cartList.splice(e,1),uni.showToast({title:"修改成功！"}))}))},oncencal:function(){},onsub:function(t,e){1!=this.cartList[e].count?(this.cartList[e].count--,this.getSumprice(),this.change_count(t)):uni.showToast({title:"已经最少!",icon:"none"})},onadd:function(t,e){this.cartList[e].count>=9999?uni.showToast({title:"已经最多!",icon:"none"}):(this.cartList[e].count++,this.getSumprice(),this.change_count(t))},setAllCurrent:function(){for(var t=0;t<this.cartList.length;t++)this.cartList[t].select=!0;this.allCurrent=!0,this.getSumprice()},getSumprice:function(){this.sumPrice=0,this.sum=0;for(var t=0;t<this.cartList.length;t++)this.cartList[t].select&&(this.sumPrice+=parseFloat(this.cartList[t].price)*this.cartList[t].count,this.sum+=this.cartList[t].count);this.sumPrice=this.sumPrice.toFixed(2)},ontouchend:function(){var t=this;this.lock&&setTimeout((function(){t.setData({lock:!1})}),100)},clearInvalid:function(){uni.showToast({title:"清空成功~",icon:"none"})},delectAll:function(){for(var t=this,e=0;e<this.cartList.length;e++){var i={goods_id:this.cartList[e].goodsId};this.request(this.server_url+"shopping/delete",i,"POST").then((function(e){0==e.code&&(t.cartList.splice(index,1),uni.showToast({title:"修改成功！"}))}))}this.cartList=[]},setTabBarBadge:function(){var t=String(this.cartList.length);0!=t?uni.setTabBarBadge({index:2,text:t}):uni.removeTabBarBadge({index:2})},jumpDetails:function(t,e){1==t.status||this.lock||uni.navigateTo({url:"/pages/views/goods/goodsDetails"})},settlement:function(){for(var t=[],e=0;e<this.cartList.length;e++)if(this.cartList[e].select){var i=(0,o.default)((0,o.default)({},this.cartList[e]),{},{number:this.cartList[e].count,imageUrl:this.cartList[e].goods_image});delete i.goods_image,t.push(i)}uni.setStorageSync("confirmOrder",t),console.log(t),uni.navigateTo({url:"/pages/shop/goods/order/confirmOrder"})},onStroll:function(){uni.navigateBack()}}};e.default=s},d424:function(t,e,i){var n=i("430b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("fa3ea402",n,!0,{sourceMap:!1,shadowMode:!1})}}]);